import{a as V}from"./chunk-MISKG5AL.js";import{a as k,b as O}from"./chunk-IJBBQY3R.js";import"./chunk-6WDZCA3R.js";import"./chunk-3GBJEJSQ.js";import{$a as s,Ab as T,Bb as u,Mb as I,Nb as r,Ob as m,Pb as F,Qb as L,Ta as l,Vb as R,a as f,gb as p,ia as v,kb as C,lb as E,mb as b,oa as S,ob as g,pc as h,qb as M,tb as y,ub as w,vb as i,wb as t,xb as d,ya as x,yb as D,za as _}from"./chunk-6YNXGWAZ.js";import"./chunk-2NFLSA4Y.js";var j=(n,a)=>a.id;function A(n,a){if(n&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),r(8),t(),i(9,"td"),r(10),t()()),n&2){let e=a.$implicit;l(2),m(e.id),l(2),m(e.title),l(2),m(e.year),l(2),m(e.duration),l(2),L("",e.director==null?null:e.director.firstname," ",e.director==null?null:e.director.lastname,"")}}function B(n,a){n&1&&(i(0,"span"),r(1,"films"),t())}function P(n,a){n&1&&(i(0,"span"),r(1,"film"),t())}function W(n,a){if(n&1){let e=D();i(0,"div",5)(1,"label",6)(2,"b"),r(3,"Recherche :"),t()(),i(4,"input",7,0),T("keyup",function(){x(e);let c=I(5),$=u();return _($.filterResults(c.value))}),t()(),i(6,"div",5)(7,"table",8)(8,"thead")(9,"tr")(10,"th",9),r(11,"Id"),t(),i(12,"th",9),r(13,"Titre"),t(),i(14,"th",9),r(15,"Ann\xE9e"),t(),i(16,"th",9),r(17,"Dur\xE9e"),t(),i(18,"th",9),r(19,"R\xE9alisateur"),t()()(),i(20,"tbody"),y(21,A,11,6,"tr",null,j),t(),i(23,"tfoot")(24,"tr")(25,"th"),r(26),p(27,B,2,0,"span")(28,P,2,0,"span"),t(),d(29,"td")(30,"td")(31,"td")(32,"td"),t()()()()}if(n&2){let e=u();l(21),w(e.movies()),l(5),F("Total : ",e.moviesCount()," "),l(),M(e.moviesCount()>1?27:28)}}function q(n,a){n&1&&d(0,"app-loader")}var U=(()=>{class n{constructor(){this.theme=s("Signals"),this.page=s("Recherche"),this.searchFilter=s(""),this.moviesS=s([]),this.movies=h(()=>{let e=this.searchFilter();return this.moviesS().filter(o=>o.title.toLowerCase().includes(e)||o.year.toString().includes(e)||o.duration.toLowerCase().includes(e)||o.director?.firstname.toLowerCase().includes(e)||o.director?.lastname.toLowerCase().includes(e))}),this.moviesCount=h(()=>this.movies().length),this.subscriptions=new f,this.movieService=v(V)}ngOnInit(){this.getMovies()}ngOnDestroy(){this.subscriptions.unsubscribe()}getMovies(){this.subscriptions.add(this.movieService.getMoviesWithDirectors().subscribe({next:e=>this.moviesS.set(e)}))}filterResults(e){this.searchFilter.set(e)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-search-movies"]],standalone:!0,features:[R],decls:7,vars:2,consts:[["searchField",""],[1500],[3,"theme","page"],[1,"row"],[1,"col-12"],[1,"mg-bottom-20"],["for","basic-url"],["type","text","id","search","maxlength","6","placeholder","filtre...",1,"form-control",2,"width","200px",3,"keyup"],[1,"table","table-striped"],["scope","col"]],template:function(o,c){o&1&&(d(0,"app-breadcrumb",2),i(1,"div",3)(2,"div",4),p(3,W,33,2)(4,q,1,0),E(5,3,null,null,4,null,null,1,C),b(),t()()),o&2&&g("theme",c.theme())("page",c.page())},dependencies:[O,k]})}}return n})();export{U as SearchMoviesComponent};
