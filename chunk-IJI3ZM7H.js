import{$ as re,Ca as ce,Fa as F,Ia as ue,M as X,U as ee,V as te,Z as ne,aa as D,bb as M,c as R,ca as f,f as H,fa as c,g as I,h as Y,ha as a,ia as d,ja as ie,jc as ae,k as W,ma as oe,pc as j,q as J,ra as se,wa as k}from"./chunk-PPHMKDYI.js";import{a as m,b as T}from"./chunk-2NFLSA4Y.js";function Ue(e){e||(k(Ue),e=d(F));let t=new R(i=>e.onDestroy(i.next.bind(i)));return i=>i.pipe(ne(t))}function U(e,t){let i=!t?.manualCleanup;i&&!t?.injector&&k(U);let n=i?t?.injector?.get(F)??d(F):null,r=_e(t?.equal),o;t?.requireSync?o=M({kind:0},{equal:r}):o=M({kind:1,value:t?.initialValue},{equal:r});let s=e.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{if(t?.rejectErrors)throw u;o.set({kind:2,error:u})}});if(t?.requireSync&&o().kind===0)throw new D(601,!1);return n?.onDestroy(s.unsubscribe.bind(s)),j(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new D(601,!1)}},{equal:t?.equal})}function _e(e=Object.is){return(t,i)=>t.kind===1&&i.kind===1&&e(t.value,i.value)}var P={};function b(e,t){if(P[e]=(P[e]||0)+1,typeof t=="function")return _(e,(...n)=>T(m({},t(...n)),{type:e}));switch(t?t._as:"empty"){case"empty":return _(e,()=>({type:e}));case"props":return _(e,n=>T(m({},n),{type:e}));default:throw new Error("Unexpected config.")}}function C(){return{_as:"props",_p:void 0}}function _(e,t){return Object.defineProperty(t,"type",{value:e,writable:!1})}var Se="@ngrx/store/init",v=(()=>{let t=class t extends I{constructor(){super({type:Se})}next(n){if(typeof n=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof n>"u")throw new TypeError("Actions must be objects");if(typeof n.type>"u")throw new TypeError("Actions must have a type property");super.next(n)}complete(){}ngOnDestroy(){super.complete()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),Pe=[v],Ie=new c("@ngrx/store Internal Root Guard"),de=new c("@ngrx/store Internal Initial State"),K=new c("@ngrx/store Initial State"),Fe=new c("@ngrx/store Reducer Factory"),le=new c("@ngrx/store Internal Reducer Factory Provider"),je=new c("@ngrx/store Initial Reducers"),N=new c("@ngrx/store Internal Initial Reducers"),Vt=new c("@ngrx/store Store Features"),fe=new c("@ngrx/store Internal Store Reducers"),$t=new c("@ngrx/store Internal Feature Reducers"),qt=new c("@ngrx/store Internal Feature Configs"),Kt=new c("@ngrx/store Internal Store Features"),Lt=new c("@ngrx/store Internal Feature Reducers Token"),Bt=new c("@ngrx/store Feature Reducers"),pe=new c("@ngrx/store User Provided Meta Reducers"),w=new c("@ngrx/store Meta Reducers"),ye=new c("@ngrx/store Internal Resolved Meta Reducers"),he=new c("@ngrx/store User Runtime Checks Config"),me=new c("@ngrx/store Internal User Runtime Checks Config"),g=new c("@ngrx/store Internal Runtime Checks"),we=new c("@ngrx/store Check if Action types are unique"),Re=new c("@ngrx/store Root Store Provider"),Gt=new c("@ngrx/store Feature State Provider");function ze(e,t={}){let i=Object.keys(e),n={};for(let o=0;o<i.length;o++){let s=i[o];typeof e[s]=="function"&&(n[s]=e[s])}let r=Object.keys(n);return function(s,u){s=s===void 0?t:s;let l=!1,p={};for(let y=0;y<r.length;y++){let h=r[y],O=n[h],Q=s[h],Z=O(Q,u);p[h]=Z,l=l||Z!==Q}return l?p:s}}function Ve(e,t){return Object.keys(e).filter(i=>i!==t).reduce((i,n)=>Object.assign(i,{[n]:e[n]}),{})}function Ae(...e){return function(t){if(e.length===0)return t;let i=e[e.length-1];return e.slice(0,-1).reduceRight((r,o)=>o(r),i(t))}}function xe(e,t){return Array.isArray(t)&&t.length>0&&(e=Ae.apply(null,[...t,e])),(i,n)=>{let r=e(i);return(o,s)=>(o=o===void 0?n:o,r(o,s))}}function $e(e){let t=Array.isArray(e)&&e.length>0?Ae(...e):i=>i;return(i,n)=>(i=t(i),(r,o)=>(r=r===void 0?n:r,i(r,o)))}var E=class extends R{},A=class extends v{},qe="@ngrx/store/update-reducers",z=(()=>{let t=class t extends I{get currentReducers(){return this.reducers}constructor(n,r,o,s){super(s(o,r)),this.dispatcher=n,this.initialState=r,this.reducers=o,this.reducerFactory=s}addFeature(n){this.addFeatures([n])}addFeatures(n){let r=n.reduce((o,{reducers:s,reducerFactory:u,metaReducers:l,initialState:p,key:y})=>{let h=typeof s=="function"?$e(l)(s,p):xe(u,l)(s,p);return o[y]=h,o},{});this.addReducers(r)}removeFeature(n){this.removeFeatures([n])}removeFeatures(n){this.removeReducers(n.map(r=>r.key))}addReducer(n,r){this.addReducers({[n]:r})}addReducers(n){this.reducers=m(m({},this.reducers),n),this.updateReducers(Object.keys(n))}removeReducer(n){this.removeReducers([n])}removeReducers(n){n.forEach(r=>{this.reducers=Ve(this.reducers,r)}),this.updateReducers(n)}updateReducers(n){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:qe,features:n})}ngOnDestroy(){this.complete()}};t.\u0275fac=function(r){return new(r||t)(a(A),a(K),a(je),a(Fe))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),Ke=[z,{provide:E,useExisting:z},{provide:A,useExisting:v}],L=(()=>{let t=class t extends H{ngOnDestroy(){this.complete()}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=ce(t)))(o||t)}})(),t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),Le=[L],x=class extends R{},ve=(()=>{let t=class t extends I{constructor(n,r,o,s){super(s);let l=n.pipe(W(Y)).pipe(re(r)),p={state:s},y=l.pipe(te(Be,p));this.stateSubscription=y.subscribe(({state:h,action:O})=>{this.next(h),o.next(O)}),this.state=U(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}};t.INIT=Se,t.\u0275fac=function(r){return new(r||t)(a(v),a(E),a(L),a(K))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})();function Be(e={state:void 0},[t,i]){let{state:n}=e;return{state:i(n,t),action:t}}var Ge=[ve,{provide:x,useExisting:ve}],S=(()=>{let t=class t extends R{constructor(n,r,o){super(),this.actionsObserver=r,this.reducerManager=o,this.source=n,this.state=n.state}select(n,...r){return Ze.call(null,n,...r)(this)}selectSignal(n,r){return j(()=>n(this.state()),r)}lift(n){let r=new t(this,this.actionsObserver,this.reducerManager);return r.operator=n,r}dispatch(n){this.actionsObserver.next(n)}next(n){this.actionsObserver.next(n)}error(n){this.actionsObserver.error(n)}complete(){this.actionsObserver.complete()}addReducer(n,r){this.reducerManager.addReducer(n,r)}removeReducer(n){this.reducerManager.removeReducer(n)}};t.\u0275fac=function(r){return new(r||t)(a(x),a(v),a(z))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),Qe=[S];function Ze(e,t,...i){return function(r){let o;if(typeof e=="string"){let s=[t,...i].filter(Boolean);o=r.pipe(ee(e,...s))}else if(typeof e=="function")o=r.pipe(J(s=>e(s,t)));else throw new TypeError(`Unexpected type '${typeof e}' in select operator, expected 'string' or 'function'`);return o.pipe(X())}}var B="https://ngrx.io/guide/store/configuration/runtime-checks";function ge(e){return e===void 0}function Ee(e){return e===null}function Ce(e){return Array.isArray(e)}function He(e){return typeof e=="string"}function Ye(e){return typeof e=="boolean"}function We(e){return typeof e=="number"}function Oe(e){return typeof e=="object"&&e!==null}function Je(e){return Oe(e)&&!Ce(e)}function Xe(e){if(!Je(e))return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function V(e){return typeof e=="function"}function et(e){return V(e)&&e.hasOwnProperty("\u0275cmp")}function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nt(e){return e instanceof c?d(e):e}function rt(e){return typeof e=="function"?e():e}function it(e,t){return e.concat(t)}function ot(){if(d(S,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function st(e,t){return function(i,n){let r=t.action(n)?$(n):n,o=e(i,r);return t.state()?$(o):o}}function $(e){Object.freeze(e);let t=V(e);return Object.getOwnPropertyNames(e).forEach(i=>{if(!i.startsWith("\u0275")&&tt(e,i)&&(!t||i!=="caller"&&i!=="callee"&&i!=="arguments")){let n=e[i];(Oe(n)||V(n))&&!Object.isFrozen(n)&&$(n)}}),e}function ct(e,t){return function(i,n){if(t.action(n)){let o=q(n);be(o,"action")}let r=e(i,n);if(t.state()){let o=q(r);be(o,"state")}return r}}function q(e,t=[]){return(ge(e)||Ee(e))&&t.length===0?{path:["root"],value:e}:Object.keys(e).reduce((n,r)=>{if(n)return n;let o=e[r];return et(o)?n:ge(o)||Ee(o)||We(o)||Ye(o)||He(o)||Ce(o)?!1:Xe(o)?q(o,[...t,r]):{path:[...t,r],value:o}},!1)}function be(e,t){if(e===!1)return;let i=e.path.join("."),n=new Error(`Detected unserializable ${t} at "${i}". ${B}#strict${t}serializability`);throw n.value=e.value,n.unserializablePath=i,n}function ut(e,t){return function(i,n){if(t.action(n)&&!ue.isInAngularZone())throw new Error(`Action '${n.type}' running outside NgZone. ${B}#strictactionwithinngzone`);return e(i,n)}}function at(e){return ae()?m({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},e):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function dt({strictActionSerializability:e,strictStateSerializability:t}){return i=>e||t?ct(i,{action:n=>e&&!G(n),state:()=>t}):i}function lt({strictActionImmutability:e,strictStateImmutability:t}){return i=>e||t?st(i,{action:n=>e&&!G(n),state:()=>t}):i}function G(e){return e.type.startsWith("@ngrx")}function ft({strictActionWithinNgZone:e}){return t=>e?ut(t,{action:i=>e&&!G(i)}):t}function pt(e){return[{provide:me,useValue:e},{provide:he,useFactory:ht,deps:[me]},{provide:g,deps:[he],useFactory:at},{provide:w,multi:!0,deps:[g],useFactory:lt},{provide:w,multi:!0,deps:[g],useFactory:dt},{provide:w,multi:!0,deps:[g],useFactory:ft}]}function yt(){return[{provide:we,multi:!0,deps:[g],useFactory:mt}]}function ht(e){return e}function mt(e){if(!e.strictActionTypeUniqueness)return;let t=Object.entries(P).filter(([,i])=>i>1).map(([i])=>i);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(i=>`"${i}"`).join(", ")}. ${B}#strictactiontypeuniqueness`)}function Rt(e={},t={}){return[{provide:Ie,useFactory:ot},{provide:de,useValue:t.initialState},{provide:K,useFactory:rt,deps:[de]},{provide:N,useValue:e},{provide:fe,useExisting:e instanceof c?e:N},{provide:je,deps:[N,[new ie(fe)]],useFactory:nt},{provide:pe,useValue:t.metaReducers?t.metaReducers:[]},{provide:ye,deps:[w,pe],useFactory:it},{provide:le,useValue:t.reducerFactory?t.reducerFactory:ze},{provide:Fe,deps:[le,ye],useFactory:xe},Pe,Ke,Le,Ge,Qe,pt(t.runtimeChecks),yt()]}function vt(){d(v),d(E),d(L),d(S),d(Ie,{optional:!0}),d(we,{optional:!0})}var gt=[{provide:Re,useFactory:vt},{provide:oe,multi:!0,useFactory(){return()=>d(Re)}}];function Qt(e,t){return se([...Rt(e,t),gt])}function Zt(...e){let t=e.pop(),i=e.map(n=>n.type);return{reducer:t,types:i}}function Ht(e,...t){let i=new Map;for(let n of t)for(let r of n.types){let o=i.get(r);if(o){let s=(u,l)=>n.reducer(o(u,l),l);i.set(r,s)}else i.set(r,n.reducer)}return function(n=e,r){let o=i.get(r.type);return o?o(n,r):n}}var Te=b("[Cart] Add article",C()),De=b("[Cart] Remove article",C()),ke=b("[Cart] Update Article Quantity",C()),Me=b("[Cart] Clear Cart");var en=(()=>{let t=class t{constructor(n){this.store=n}addArticle(n,r){this.store.dispatch(Te({article:n,maxQuantity:r}))}removeArticle(n){this.store.dispatch(De({articleId:n}))}updateQuantity(n,r){this.store.dispatch(ke({articleId:n,quantity:r}))}clearCart(){this.store.dispatch(Me())}getCartArticles(){return this.store.select(n=>n.cart.articles)}getCartNbArticles(){return this.store.select(n=>n.cart.articles.reduce((r,o)=>r+o.quantity,0))}getCartTotalPrice(){return this.store.select(n=>n.cart.articles.reduce((r,o)=>r+o.unitPrice*o.quantity,0))}};t.\u0275fac=function(r){return new(r||t)(a(S))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{Ue as a,b,Re as c,Gt as d,L as e,S as f,Qt as g,Zt as h,Ht as i,Te as j,De as k,ke as l,Me as m,en as n};
