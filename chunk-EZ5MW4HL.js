import{a as $}from"./chunk-E76N6OV4.js";import{a as O,b as V}from"./chunk-7GHFXXJX.js";import"./chunk-ZZNQI2HT.js";import{Db as F,Eb as n,Fb as c,Gb as L,Hb as R,Mb as k,Sa as s,Za as m,a as v,dc as f,eb as u,fb as E,ga as x,gb as b,hb as g,jb as y,lb as M,ma as S,nb as w,ob as D,pb as t,qb as e,rb as p,sb as T,ub as I,vb as h,wa as _,xa as C}from"./chunk-DH3RPQDP.js";import"./chunk-2NFLSA4Y.js";var j=(i,r)=>r.id;function A(i,r){if(i&1&&(t(0,"tr")(1,"td"),n(2),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),e(),t(7,"td"),n(8),e(),t(9,"td"),n(10),e()()),i&2){let o=r.$implicit;s(2),c(o.id),s(2),c(o.title),s(2),c(o.year),s(2),c(o.duration),s(2),R("",o.director==null?null:o.director.firstname," ",o.director==null?null:o.director.lastname,"")}}function B(i,r){i&1&&(t(0,"span"),n(1,"films"),e())}function P(i,r){i&1&&(t(0,"span"),n(1,"film"),e())}function W(i,r){if(i&1){let o=T();t(0,"div",5)(1,"label",6)(2,"b"),n(3,"Recherche :"),e()(),t(4,"input",7,0),I("keyup",function(){_(o);let a=F(5),d=h();return C(d.filterResults(a.value))}),e()(),t(6,"div",5)(7,"table",8)(8,"thead")(9,"tr")(10,"th",9),n(11,"Id"),e(),t(12,"th",9),n(13,"Titre"),e(),t(14,"th",9),n(15,"Ann\xE9e"),e(),t(16,"th",9),n(17,"Dur\xE9e"),e(),t(18,"th",9),n(19,"R\xE9alisateur"),e()()(),t(20,"tbody"),w(21,A,11,6,"tr",null,j),e(),t(23,"tfoot")(24,"tr")(25,"th"),n(26),u(27,B,2,0,"span")(28,P,2,0,"span"),e(),p(29,"td")(30,"td")(31,"td")(32,"td"),e()()()()}if(i&2){let o=h();s(21),D(o.movies()),s(5),L("Total : ",o.moviesCount()," "),s(),M(o.moviesCount()>1?27:28)}}function q(i,r){i&1&&p(0,"app-loader")}var U=(()=>{let r=class r{constructor(){this.theme=m("Signals"),this.page=m("Recherche"),this.searchFilter=m(""),this.moviesS=m([]),this.movies=f(()=>{let l=this.searchFilter();return this.moviesS().filter(a=>a.title.toLowerCase().includes(l)||a.year.toString().includes(l)||a.duration.toLowerCase().includes(l)||a.director?.firstname.toLowerCase().includes(l)||a.director?.lastname.toLowerCase().includes(l))}),this.moviesCount=f(()=>this.movies().length),this.subscriptions=new v,this.movieService=x($)}ngOnInit(){this.getMovies()}ngOnDestroy(){this.subscriptions.unsubscribe()}getMovies(){this.subscriptions.add(this.movieService.getMoviesWithDirectors().subscribe({next:l=>this.moviesS.set(l)}))}filterResults(l){this.searchFilter.set(l)}};r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=S({type:r,selectors:[["app-search-movies"]],standalone:!0,features:[k],decls:7,vars:2,consts:[["searchField",""],[1500],[3,"theme","page"],[1,"row"],[1,"col-12"],[1,"mg-bottom-20"],["for","basic-url"],["type","text","id","search","maxlength","6","placeholder","filtre...",1,"form-control",2,"width","200px",3,"keyup"],[1,"table","table-striped"],["scope","col"]],template:function(a,d){a&1&&(p(0,"app-breadcrumb",2),t(1,"div",3)(2,"div",4),u(3,W,33,2)(4,q,1,0),b(5,3,null,null,4,null,null,1,E),g(),e()()),a&2&&y("theme",d.theme())("page",d.page())},dependencies:[V,O]});let i=r;return i})();export{U as SearchMoviesComponent};
