import{a as F,b as N,c as z,d as $,e as J}from"./chunk-TDDVR6M7.js";import"./chunk-SZKK2B5E.js";import{a as Q,b as A}from"./chunk-AHLR4UE3.js";import"./chunk-MYRRSK7I.js";import{Ab as C,Cb as u,Db as m,Pb as s,Rb as E,Sb as b,Td as O,Va as r,Xb as P,bb as I,ib as f,mb as w,nb as y,oa as L,ob as K,qb as x,rc as M,rd as V,sb as T,vb as g,wb as h,xb as n,ya as _,yb as a,za as k,zb as D}from"./chunk-CNPTLGMH.js";import"./chunk-2NFLSA4Y.js";var v=(t,l)=>l.id,j=()=>[V,$,J,z];function G(t,l){if(t&1){let e=C();n(0,"button",18),u("click",function(){_(e);let i=m(3);return k(i.deleteAllItems())}),s(1,"Vider le tableau"),a()}}function B(t,l){t&1&&(s(0," \xA0 "),n(1,"span",17),s(2,"Vous avez atteint le nombre maximum de t\xE2ches"),a())}function U(t,l){if(t&1&&f(0,G,2,0,"button",16)(1,B,3,0,"span",17),t&2){let e=m(2);T(e.allTasksCount()>0?0:-1),r(),T(e.allTasksCount()>=e.nbTasksMax?1:-1)}}function X(t,l){if(t&1){let e=C();n(0,"div",12),s(1),n(2,"button",19),u("click",function(){let i=_(e).$implicit,d=m(2);return k(d.deleteItem(i))}),s(3,"X"),a()()}if(t&2){let e=l.$implicit;r(),b(" ",e.id," - ",e.title," ")}}function q(t,l){if(t&1&&(n(0,"div",12),s(1),a()),t&2){let e=l.$implicit;r(),b("",e.id," - ",e.title,"")}}function H(t,l){if(t&1&&(n(0,"div",12),s(1),a()),t&2){let e=l.$implicit;r(),b("",e.id," - ",e.title,"")}}function R(t,l){if(t&1&&(n(0,"div",12),s(1),a()),t&2){let e=l.$implicit;r(),b("",e.id," - ",e.title,"")}}function W(t,l){if(t&1){let e=C();n(0,"div",2)(1,"div",3)(2,"button",5),u("click",function(){_(e);let i=m();return k(i.addItem())}),s(3,"Ajouter une t\xE2che"),a(),s(4,"\xA0 "),f(5,U,2,2),D(6,"br")(7,"br"),a()(),n(8,"div",2)(9,"div",3)(10,"div",6)(11,"table")(12,"thead")(13,"tr",7)(14,"th",8)(15,"h4"),s(16,"To do"),a()(),n(17,"th",8)(18,"h4"),s(19,"In progress"),a()(),n(20,"th",8)(21,"h4"),s(22,"Test QA"),a()(),n(23,"th",8)(24,"h4"),s(25,"Done"),a()()()(),n(26,"tbody")(27,"tr",9)(28,"td")(29,"div",10)(30,"div",11),u("cdkDropListDropped",function(i){_(e);let d=m();return k(d.drop(i))}),g(31,X,4,2,"div",12,v),a()()(),n(33,"td")(34,"div",10)(35,"div",13),u("cdkDropListDropped",function(i){_(e);let d=m();return k(d.drop(i))}),g(36,q,2,2,"div",12,v),a()()(),n(38,"td")(39,"div",10)(40,"div",14),u("cdkDropListDropped",function(i){_(e);let d=m();return k(d.drop(i))}),g(41,H,2,2,"div",12,v),a()()(),n(43,"td")(44,"div",10)(45,"div",15),u("cdkDropListDropped",function(i){_(e);let d=m();return k(d.drop(i))}),g(46,R,2,2,"div",12,v),a()()()()()()()()()}if(t&2){let e=m();r(2),x("disabled",e.allTasksCount()>=e.nbTasksMax)("ngClass",e.allTasksCount()>=e.nbTasksMax?"btn btn-outline-secondary btn-sm rounded-pill":"btn btn-outline-info btn-sm rounded-pill"),r(3),T(e.allTasks()?5:-1),r(25),x("cdkDropListData",e.allTasks().todos),r(),h(e.allTasks().todos),r(4),x("cdkDropListData",e.allTasks().inProgress),r(),h(e.allTasks().inProgress),r(4),x("cdkDropListData",e.allTasks().testsQa),r(),h(e.allTasks().testsQa),r(4),x("cdkDropListData",e.allTasks().done),r(),h(e.allTasks().done)}}function Y(t,l){t&1&&D(0,"app-loader")}var re=(()=>{class t{constructor(){this.theme="Angular/CDK",this.theme1="Drag and Drop",this.page="Kanban",this.localStorageKey="kanbanTasks",this.nbTasksMax=10,this.initialAllTasks={todos:[{id:1,title:"Nouvelle t\xE2che"}],inProgress:[],testsQa:[],done:[]},this.allTasksInStorage=window.localStorage?localStorage.getItem(this.localStorageKey):null,this.allTasks=I(this.allTasksInStorage?JSON.parse(this.allTasksInStorage):this.initialAllTasks),this.allTasksCount=M(()=>this.allTasks().todos.length+this.allTasks().inProgress.length+this.allTasks().testsQa.length+this.allTasks().done.length)}drop(e){e.previousContainer===e.container?F(e.container.data,e.previousIndex,e.currentIndex):N(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks()))}addItem(){if(this.allTasksCount()<this.nbTasksMax){let e=this.allTasks().todos.length===0?0:this.allTasks().todos.reduce((c,p)=>c.id>p.id?c:p).id,o=this.allTasks().inProgress.length===0?0:this.allTasks().inProgress.reduce((c,p)=>c.id>p.id?c:p).id,i=this.allTasks().testsQa.length===0?0:this.allTasks().testsQa.reduce((c,p)=>c.id>p.id?c:p).id,d=this.allTasks().done.length===0?0:this.allTasks().done.reduce((c,p)=>c.id>p.id?c:p).id,S=this.allTasks().todos;S.push({id:Math.max(e,o,i,d)+1,title:"Nouvelle t\xE2che"}),this.allTasks.set({todos:S,inProgress:this.allTasks().inProgress,testsQa:this.allTasks().testsQa,done:this.allTasks().done}),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks()))}}deleteItem(e){let o=this.allTasks().todos,i=o.findIndex(d=>d.id===e.id);i>-1&&(o.splice(i,1),this.allTasks.set({todos:o,inProgress:this.allTasks().inProgress,testsQa:this.allTasks().testsQa,done:this.allTasks().done}),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks())))}deleteAllItems(){this.allTasks.set({todos:[],inProgress:[],testsQa:[],done:[]}),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks()))}setLocalStorageItem(e,o){window.localStorage&&localStorage.setItem(e,o)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=L({type:t,selectors:[["app-kanban"]],standalone:!0,features:[P],decls:16,vars:4,consts:[[1500],[3,"theme","theme1","page"],[1,"row"],[1,"col-12"],[1,"mg-page-title"],[3,"click","disabled","ngClass"],["cdkDropListGroup",""],[2,"text-align","center"],["scope","col"],[2,"vertical-align","top"],[1,"task-container"],["id","todosList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"task-box"],["id","inProgressList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],["id","testsQaList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],["id","doneList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],[1,"btn","btn-sm","btn-outline-danger","rounded-pill"],[1,"text-danger"],[1,"btn","btn-sm","btn-outline-danger","rounded-pill",3,"click"],["type","button",1,"btn","btn-sm","btn-outline-danger","task-box-delete-btn",3,"click"]],template:function(o,i){o&1&&(D(0,"app-breadcrumb",1),n(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3"),s(5,"Drag and Drop (Kanban)"),a(),n(6,"div"),s(7," - Tableau Kanban avec Drag and Drop pour ordonner les t\xE2ches "),a(),n(8,"div"),s(9," - Utilisation du localStorage pour la persistance des donn\xE9es "),a(),n(10,"div"),s(11),a()()()(),f(12,W,48,7)(13,Y,1,0),y(14,12,j,null,13,null,null,0,w),K()),o&2&&(x("theme",i.theme)("theme1",i.theme1)("page",i.page),r(11),E(" - Pour l'exemple, ",i.nbTasksMax," t\xE2ches maximum au total "))},dependencies:[O,Q,A],styles:[".task-container[_ngcontent-%COMP%]{width:250px;max-width:100%;margin:0 0 25px;display:inline-block;vertical-align:top}.task-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:0px;background:#fff;border-radius:4px;overflow:hidden;display:block}.task-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.task-box[_ngcontent-%COMP%]:last-child{border:none}.task-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .task-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.task-box-delete-btn[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"]})}}return t})();export{re as KanbanComponent};
