import{a as R}from"./chunk-E76N6OV4.js";import{a as W,b as O}from"./chunk-7GHFXXJX.js";import"./chunk-ZZNQI2HT.js";import{E as C,Eb as o,Fb as m,Gb as y,Hb as V,Mb as $,Sa as s,Za as d,a as S,dc as F,eb as p,fb as g,ga as E,gb as D,hb as T,jb as w,lb as f,ma as M,nb as I,ob as k,pb as i,qb as e,rb as b,sb as h,ub as x,vb as u,wa as v,xa as _}from"./chunk-DH3RPQDP.js";import"./chunk-2NFLSA4Y.js";var j=(t,r)=>r.id;function A(t,r){t&1&&(i(0,"span"),o(1,"films"),e())}function B(t,r){t&1&&(i(0,"span"),o(1,"film"),e())}function L(t,r){if(t&1){let n=h();i(0,"tr")(1,"td"),o(2),e(),i(3,"td"),o(4),e(),i(5,"td"),o(6),e(),i(7,"td"),o(8),e(),i(9,"td"),o(10),e(),i(11,"td")(12,"button",8),x("click",function(){let l=v(n).$implicit,c=u(2);return _(c.deleteMovie(l.id))}),o(13,"Supprimer"),e()()()}if(t&2){let n=r.$implicit;s(2),m(n.id),s(2),m(n.title),s(2),m(n.year),s(2),m(n.duration),s(2),V("",n.director==null?null:n.director.firstname," ",n.director==null?null:n.director.lastname,"")}}function P(t,r){if(t&1){let n=h();i(0,"button",9),x("click",function(){v(n);let l=u(2);return _(l.initMoviesTable())}),o(1,"R\xE9initialiser le tableau"),e()}}function q(t,r){if(t&1&&(i(0,"div",4)(1,"table",5)(2,"thead")(3,"tr")(4,"th",6),o(5,"Id"),e(),i(6,"th",6),o(7,"Titre"),e(),i(8,"th",6),o(9,"Ann\xE9e"),e(),i(10,"th",6),o(11,"Dur\xE9e"),e(),i(12,"th",6),o(13,"R\xE9alisateur"),e(),i(14,"th",6),o(15),p(16,A,2,0,"span")(17,B,2,0,"span"),e()()(),i(18,"tbody"),I(19,L,14,6,"tr",null,j),e()(),p(21,P,2,0,"button",7),e()),t&2){let n=u();s(15),y("Total : ",n.moviesCount()," "),s(),f(n.moviesCount()>1?16:17),s(3),k(n.movies()),s(2),f(n.moviesCount()<10?21:-1)}}function z(t,r){t&1&&b(0,"app-loader")}var X=(()=>{let r=class r{constructor(){this.theme=d("Signals"),this.page=d("Suppression"),this.movies=d([]),this.moviesCount=F(()=>this.movies().length),this.subscriptions=new S,this.movieService=E(R)}ngOnInit(){this.getMovies()}ngOnDestroy(){this.subscriptions.unsubscribe()}getMovies(){let a=this.movieService.getMoviesWithDirectors();this.subscriptions.add(a.subscribe({next:l=>{this.movies.set(l)}}))}deleteMovie(a){this.subscriptions.add(this.movieService.deleteMovie(a).subscribe()),this.getMovies()}initMoviesTable(){let a=this.movieService.resetDatabase("movies").pipe(C(()=>this.movieService.getMoviesWithDirectors()));this.subscriptions.add(a.subscribe({next:l=>this.movies.set(l)}))}};r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=M({type:r,selectors:[["app-movies"]],standalone:!0,features:[$],decls:7,vars:2,consts:[[1500],[3,"theme","page"],[1,"row"],[1,"col-12"],[1,"mg-bottom-20"],[1,"table","table-striped"],["scope","col"],[1,"btn","btn-sm","btn-outline-info","rounded-pill"],[1,"btn","btn-sm","btn-outline-danger","rounded-pill",3,"click"],[1,"btn","btn-sm","btn-outline-info","rounded-pill",3,"click"]],template:function(l,c){l&1&&(b(0,"app-breadcrumb",1),i(1,"div",2)(2,"div",3),p(3,q,22,3)(4,z,1,0),D(5,3,null,null,4,null,null,0,g),T(),e()()),l&2&&w("theme",c.theme())("page",c.page())},dependencies:[W,O]});let t=r;return t})();export{X as MoviesComponent};
