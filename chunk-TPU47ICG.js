import{a as N,b as z,c as $,d as J,e as j}from"./chunk-5J2FSTKC.js";import"./chunk-W5XLQXLF.js";import{a as A,b as F}from"./chunk-ECCECWUM.js";import"./chunk-PSCJD4XD.js";import{Ab as u,Bb as m,Lb as l,Md as Q,Nb as P,Ob as b,Tb as M,Va as d,db as w,kb as f,kc as V,kd as O,lb as y,mb as E,nb as K,oa as I,pb as x,rb as T,tb as g,ub as h,vb as o,wb as s,xb as D,ya as _,yb as C,za as k}from"./chunk-RDBCIR3G.js";import"./chunk-2NFLSA4Y.js";var v=(t,a)=>a.id,G=()=>[O,J,j,$];function B(t,a){if(t&1){let e=C();o(0,"button",18),u("click",function(){_(e);let i=m(3);return k(i.deleteAllItems())}),l(1,"Vider le tableau"),s()}}function U(t,a){t&1&&(l(0," \xA0 "),o(1,"span",17),l(2,"Vous avez atteint le nombre maximum de t\xE2ches"),s())}function X(t,a){if(t&1&&f(0,B,2,0,"button",16)(1,U,3,0,"span",17),t&2){let e=m(2);T(e.allTasksCount()>0?0:-1),d(),T(e.allTasksCount()>=e.nbTasksMax?1:-1)}}function q(t,a){if(t&1){let e=C();o(0,"div",12),l(1),o(2,"button",19),u("click",function(){let i=_(e).$implicit,r=m(2);return k(r.deleteItem(i))}),l(3,"X"),s()()}if(t&2){let e=a.$implicit;d(),b(" ",e.id," - ",e.title," ")}}function H(t,a){if(t&1&&(o(0,"div",12),l(1),s()),t&2){let e=a.$implicit;d(),b("",e.id," - ",e.title,"")}}function R(t,a){if(t&1&&(o(0,"div",12),l(1),s()),t&2){let e=a.$implicit;d(),b("",e.id," - ",e.title,"")}}function W(t,a){if(t&1&&(o(0,"div",12),l(1),s()),t&2){let e=a.$implicit;d(),b("",e.id," - ",e.title,"")}}function Y(t,a){if(t&1){let e=C();o(0,"div",2)(1,"div",3)(2,"button",5),u("click",function(){_(e);let i=m();return k(i.addItem())}),l(3,"Ajouter une t\xE2che"),s(),l(4,"\xA0 "),f(5,X,2,2),D(6,"br")(7,"br"),s()(),o(8,"div",2)(9,"div",3)(10,"div",6)(11,"table")(12,"thead")(13,"tr",7)(14,"th",8)(15,"h4"),l(16,"To do"),s()(),o(17,"th",8)(18,"h4"),l(19,"In progress"),s()(),o(20,"th",8)(21,"h4"),l(22,"Test QA"),s()(),o(23,"th",8)(24,"h4"),l(25,"Done"),s()()()(),o(26,"tbody")(27,"tr",9)(28,"td")(29,"div",10)(30,"div",11),u("cdkDropListDropped",function(i){_(e);let r=m();return k(r.drop(i))}),g(31,q,4,2,"div",12,v),s()()(),o(33,"td")(34,"div",10)(35,"div",13),u("cdkDropListDropped",function(i){_(e);let r=m();return k(r.drop(i))}),g(36,H,2,2,"div",12,v),s()()(),o(38,"td")(39,"div",10)(40,"div",14),u("cdkDropListDropped",function(i){_(e);let r=m();return k(r.drop(i))}),g(41,R,2,2,"div",12,v),s()()(),o(43,"td")(44,"div",10)(45,"div",15),u("cdkDropListDropped",function(i){_(e);let r=m();return k(r.drop(i))}),g(46,W,2,2,"div",12,v),s()()()()()()()()()}if(t&2){let e=m();d(2),x("disabled",e.allTasksCount()>=e.nbTasksMax)("ngClass",e.allTasksCount()>=e.nbTasksMax?"btn btn-outline-secondary btn-sm rounded-pill":"btn btn-outline-info btn-sm rounded-pill"),d(3),T(e.allTasks()?5:-1),d(25),x("cdkDropListData",e.allTasks().todos),d(),h(e.allTasks().todos),d(4),x("cdkDropListData",e.allTasks().inProgress),d(),h(e.allTasks().inProgress),d(4),x("cdkDropListData",e.allTasks().testsQa),d(),h(e.allTasks().testsQa),d(4),x("cdkDropListData",e.allTasks().done),d(),h(e.allTasks().done)}}function Z(t,a){t&1&&D(0,"app-loader")}var le=(()=>{let a=class a{constructor(){this.theme="Cdk",this.theme1="Drag and Drop",this.page="Kanban",this.localStorageKey="kanbanTasks",this.nbTasksMax=10,this.initialAllTasks={todos:[{id:1,title:"Nouvelle t\xE2che"}],inProgress:[],testsQa:[],done:[]},this.allTasksInStorage=window.localStorage?localStorage.getItem(this.localStorageKey):null,this.allTasks=w(this.allTasksInStorage?JSON.parse(this.allTasksInStorage):this.initialAllTasks),this.allTasksCount=V(()=>this.allTasks().todos.length+this.allTasks().inProgress.length+this.allTasks().testsQa.length+this.allTasks().done.length)}drop(n){n.previousContainer===n.container?N(n.container.data,n.previousIndex,n.currentIndex):z(n.previousContainer.data,n.container.data,n.previousIndex,n.currentIndex),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks()))}addItem(){if(this.allTasksCount()<this.nbTasksMax){let n=this.allTasks().todos.length===0?0:this.allTasks().todos.reduce((c,p)=>c.id>p.id?c:p).id,i=this.allTasks().inProgress.length===0?0:this.allTasks().inProgress.reduce((c,p)=>c.id>p.id?c:p).id,r=this.allTasks().testsQa.length===0?0:this.allTasks().testsQa.reduce((c,p)=>c.id>p.id?c:p).id,S=this.allTasks().done.length===0?0:this.allTasks().done.reduce((c,p)=>c.id>p.id?c:p).id,L=this.allTasks().todos;L.push({id:Math.max(n,i,r,S)+1,title:"Nouvelle t\xE2che"}),this.allTasks.set({todos:L,inProgress:this.allTasks().inProgress,testsQa:this.allTasks().testsQa,done:this.allTasks().done}),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks()))}}deleteItem(n){let i=this.allTasks().todos,r=i.findIndex(S=>S.id===n.id);r>-1&&(i.splice(r,1),this.allTasks.set({todos:i,inProgress:this.allTasks().inProgress,testsQa:this.allTasks().testsQa,done:this.allTasks().done}),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks())))}deleteAllItems(){this.allTasks.set({todos:[],inProgress:[],testsQa:[],done:[]}),this.setLocalStorageItem(this.localStorageKey,JSON.stringify(this.allTasks()))}setLocalStorageItem(n,i){window.localStorage&&localStorage.setItem(n,i)}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=I({type:a,selectors:[["app-kanban"]],standalone:!0,features:[M],decls:16,vars:4,consts:[[1500],[3,"theme","theme1","page"],[1,"row"],[1,"col-12"],[1,"mg-page-title"],[3,"click","disabled","ngClass"],["cdkDropListGroup",""],[2,"text-align","center"],["scope","col"],[2,"vertical-align","top"],[1,"task-container"],["id","todosList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"task-box"],["id","inProgressList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],["id","testsQaList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],["id","doneList","cdkDropList","",1,"task-list",3,"cdkDropListDropped","cdkDropListData"],[1,"btn","btn-sm","btn-outline-danger","rounded-pill"],[1,"text-danger"],[1,"btn","btn-sm","btn-outline-danger","rounded-pill",3,"click"],["type","button",1,"btn","btn-sm","btn-outline-danger","task-box-delete-btn",3,"click"]],template:function(i,r){i&1&&(D(0,"app-breadcrumb",1),o(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3"),l(5,"Drag and Drop (Kanban)"),s(),o(6,"div"),l(7," - Tableau Kanban avec Drag and Drop pour ordonner les t\xE2ches "),s(),o(8,"div"),l(9," - Utilisation du localStorage pour la persistance des donn\xE9es "),s(),o(10,"div"),l(11),s()()()(),f(12,Y,48,7)(13,Z,1,0),E(14,12,G,null,13,null,null,0,y),K()),i&2&&(x("theme",r.theme)("theme1",r.theme1)("page",r.page),d(11),P(" - Pour l'exemple, ",r.nbTasksMax," t\xE2ches maximum au total "))},dependencies:[Q,A,F],styles:[".task-container[_ngcontent-%COMP%]{width:250px;max-width:100%;margin:0 0 25px;display:inline-block;vertical-align:top}.task-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:0px;background:#fff;border-radius:4px;overflow:hidden;display:block}.task-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.task-box[_ngcontent-%COMP%]:last-child{border:none}.task-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .task-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.task-box-delete-btn[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"]});let t=a;return t})();export{le as KanbanComponent};
